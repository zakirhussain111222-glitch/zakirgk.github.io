<script>
const questions = [
    {q:"‡§Ö‡§∞‡§¨‡•ã‡§Ç ‡§®‡•á ‡§≠‡§æ‡§∞‡§§ ‡§™‡§∞ ‡§ï‡§¨ ‡§Ü‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§ï‡§ø‡§Ø‡§æ?",opts:["712 ‡§à.","1025 ‡§à.","1192 ‡§à.","1206 ‡§à."],correct:0},
    {q:"‡§Ö‡§∞‡§¨‡•ã‡§Ç ‡§ï‡•á ‡§Ü‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§∏‡§ø‡§Ç‡§ß ‡§™‡§∞ ‡§ï‡§ø‡§∏‡§ï‡§æ ‡§∂‡§æ‡§∏‡§® ‡§•‡§æ?",opts:["‡§¶‡§æ‡§π‡§ø‡§∞","‡§ú‡§Ø‡§ö‡§Ç‡§¶","‡§™‡•É‡§•‡•ç‡§µ‡•Ä‡§∞‡§æ‡§ú ‡§ö‡•å‡§π‡§æ‡§®","‡§®‡§æ‡§ó‡§≠‡§ü‡•ç‡§ü"],correct:0},
    {q:"‡§ï‡§ø‡§∏‡§ï‡•á ‡§®‡•á‡§§‡•É‡§§‡•ç‡§µ ‡§Æ‡•á‡§Ç ‡§Ö‡§∞‡§¨‡•ã‡§Ç ‡§®‡•á ‡§≠‡§æ‡§∞‡§§ ‡§™‡§∞ ‡§™‡§π‡§≤‡§æ ‡§∏‡§´‡§≤ ‡§Ü‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§ï‡§ø‡§Ø‡§æ?",opts:["‡§ö‡§Ç‡§ó‡•á‡§ú‡§º ‡§ñ‡§º‡§æ‡§®","‡§Æ‡§π‡§Æ‡•Ç‡§¶ ‡§ó‡§ú‡§®‡§µ‡•Ä","‡§Æ‡•Å‡§π‡§Æ‡•ç‡§Æ‡§¶ ‡§¨‡§ø‡§® ‡§ï‡§æ‡§∏‡§ø‡§Æ","‡§§‡•à‡§Æ‡•Ç‡§∞"],correct:2},
    {q:"‡§ó‡§ú‡§®‡•Ä ‡§∏‡§æ‡§Æ‡•ç‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§æ‡§™‡§®‡§æ ‡§ï‡§ø‡§∏‡§®‡•á ‡§ï‡•Ä?",opts:["‡§Æ‡§π‡§Æ‡•Ç‡§¶ ‡§ó‡§ú‡§®‡§µ‡•Ä","‡§Ö‡§≤‡§™‡•ç‡§§‡§ó‡•Ä‡§®","‡§∏‡•Å‡§¨‡•Å‡§ï‡•ç‡§§‡§ó‡•Ä‡§®","‡§Æ‡•Å‡§π‡§Æ‡•ç‡§Æ‡§¶ ‡§ó‡•å‡§∞‡•Ä"],correct:1},
    // ... (add all 25 questions from your original code here)
    {q:"‡§ê‡§¨‡§ï ‡§ï‡•Ä ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§á‡§≤‡•ç‡§§‡•Å‡§§‡§Æ‡§ø‡§∂ ‡§ï‡§π‡§æ‡§Å ‡§ï‡§æ ‡§ó‡§µ‡§∞‡•ç‡§®‡§∞ ‡§•‡§æ?",opts:["‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä","‡§¨‡§¶‡§æ‡§Ø‡•Ç‡§Ç","‡§≤‡§æ‡§π‡•å‡§∞","‡§¨‡§Ç‡§ó‡§æ‡§≤"],correct:1}
];

let currentQuestion = 0;
let answers = new Array(questions.length).fill(-1);
let score = 0;
let timeLeft = 30 * 60;
let timer;
let totalTime = 30 * 60;
let studentName = '';

function startQuiz() {
    studentName = document.getElementById('studentName').value.trim();
    if (!studentName) {
        alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç!');
        return;
    }
    document.querySelector('.name-screen').classList.remove('active');
    document.querySelector('.quiz-screen').classList.add('active');
    document.getElementById('quizTitle').innerHTML = `${studentName}<br><small>‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§∏‡§≤‡•ç‡§§‡§®‡§§ MCQ Quiz</small>`;
    loadQuestion();
    startTimer();
}

function startTimer() {
    timer = setInterval(() => {
        timeLeft--;
        let mins = Math.floor(timeLeft / 60);
        let secs = timeLeft % 60;
        document.getElementById('timer').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
        document.getElementById('progressFill').style.width = `${((totalTime - timeLeft) / totalTime) * 100}%`;
        if (timeLeft <= 0) submitQuiz();
    }, 1000);
}

function loadQuestion() {
    const q = questions[currentQuestion];
    document.getElementById('question').textContent = `${currentQuestion + 1}. ${q.q}`;
    const options = document.getElementById('options');
    options.innerHTML = '';
    q.opts.forEach((opt, i) => {
        const div = document.createElement('div');
        div.className = 'option';
        div.innerHTML = `<input type="radio" name="q${currentQuestion}" value="${i}" id="opt${currentQuestion}_${i}">
                        <label for="opt${currentQuestion}_${i}">${String.fromCharCode(65+i)}. ${opt}</label>`;
        div.addEventListener('click', () => selectOption(i));
        options.appendChild(div);
    });
    document.getElementById('currentQ').textContent = currentQuestion + 1;
    document.getElementById('prevBtn').style.display = currentQuestion > 0 ? 'block' : 'none';
    document.getElementById('submitBtn').style.display = answers.filter(a => a !== -1).length === questions.length ? 'block' : 'none';
    if (answers[currentQuestion] !== -1) {
        document.querySelector(`input[name="q${currentQuestion}"][value="${answers[currentQuestion]}"]`).parentElement.classList.add('selected');
    }
}

function selectOption(index) {
    answers[currentQuestion] = index;
    document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
    event.target.parentElement.classList.add('selected');
    document.getElementById('submitBtn').style.display = answers.filter(a => a !== -1).length === questions.length ? 'block' : 'none';
}

function nextQuestion() {
    saveAnswer();
    currentQuestion = Math.min(currentQuestion + 1, questions.length - 1);
    loadQuestion();
}

function prevQuestion() {
    saveAnswer();
    currentQuestion = Math.max(currentQuestion - 1, 0);
    loadQuestion();
}

function saveAnswer() {
    const selected = document.querySelector(`input[name="q${currentQuestion}"]:checked`);
    if (selected) answers[currentQuestion] = parseInt(selected.value);
}

function submitQuiz() {
    clearInterval(timer);
    score = 0;
    for (let i = 0; i < answers.length; i++) {
        if (answers[i] === questions[i].correct) score++;
    }
    showResults();
}

function showResults() {
    document.querySelector('.quiz-screen').classList.remove('active');
    document.querySelector('.result-screen').classList.add('active');
    document.getElementById('resultName').textContent = studentName;
    document.getElementById('finalScore').textContent = `${score}/${questions.length}`;
    
    let gradeClass = 'grade-poor', gradeText = '‡§î‡§∏‡§§';
    if (score >= 21) { gradeClass = 'grade-excellent'; gradeText = '‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü! ü•á'; }
    else if (score >= 16) { gradeClass = 'grade-good'; gradeText = '‡§Ö‡§ö‡•ç‡§õ‡§æ! ü•à'; }
    else if (score >= 11) { gradeClass = 'grade-average'; gradeText = '‡§∏‡•Å‡§ß‡§æ‡§∞ ‡§ï‡•Ä ‡§ú‡§∞‡•Ç‡§∞‡§§'; }
    
    document.getElementById('gradeBadge').innerHTML = `<div class="grade-badge ${gradeClass}">${gradeText}</div>`;
    document.getElementById('scoreText').textContent = `${Math.round((score/questions.length)*100)}% ‡§Ö‡§Ç‡§ï ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§`;
    
    let review = '';
    questions.forEach((q, i) => {
        const userAns = answers[i];
        const isCorrect = userAns === q.correct;
        review += `<div class="review-item ${isCorrect ? 'correct' : 'wrong'}">
            <strong>${i+1}. ${q.q}</strong><br>
            ‡§Ü‡§™‡§ï‡§æ ‡§â‡§§‡•ç‡§§‡§∞: ${String.fromCharCode(65+userAns)} ${userAns !== -1 ? questions[i].opts[userAns] : '(‡§ï‡•ã‡§à ‡§â‡§§‡•ç‡§§‡§∞ ‡§®‡§π‡•Ä‡§Ç)'}<br>
            ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞: ${String.fromCharCode(65+q.correct)} ${q.opts[q.correct]}
        </div>`;
    });
    document.getElementById('review').innerHTML = review;
}

function downloadResults() {
    const data = `‡§ï‡•ç‡§µ‡§ø‡§ú ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ - ${studentName}
‡§§‡§ø‡§•‡§ø: ${new Date().toLocaleString('hi-IN')}
‡§∏‡•ç‡§ï‡•ã‡§∞: ${score}/${questions.length} (${Math.round((score/questions.length)*100)}%)

‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£:
${document.getElementById('review').innerText}`;
    const blob = new Blob([data], {type: 'text/plain;charset=utf-8'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `quiz_result_${studentName}_${new Date().toISOString().slice(0,10)}.txt`;
    a.click();
}

function printQuiz() {
    window.print();
}

function restartQuiz() {
    document.querySelector('.result-screen').classList.remove('active');
    document.querySelector('.name-screen').classList.add('active');
    document.getElementById('studentName').value = '';
    currentQuestion = 0;
    answers = new Array(questions.length).fill(-1);
    score = 0;
    timeLeft = totalTime;
    clearInterval(timer);
}

// Enter key support
document.getElementById('studentName').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') startQuiz();
});
</script>
