<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HistoryMaster | बंगाल पर अंग्रेज़ों का आधिपत्य - Advanced MCQ Test</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #7c3aed;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f9fafb;
            --border: #e5e7eb;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Nirmala UI', system-ui, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f0f9ff 0%, #fdf2f8 100%);
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Header */
        .header {
            background: white;
            border-radius: 16px;
            padding: 25px 30px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border-left: 6px solid var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .title-section h1 {
            color: var(--primary);
            font-size: 32px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .title-section h1 i {
            color: var(--secondary);
        }
        
        .subtitle {
            color: #6b7280;
            font-size: 16px;
            max-width: 600px;
        }
        
        .badges {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .badge {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        /* Dashboard */
        .dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 900px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        
        /* Progress Card */
        .progress-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .progress-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark);
        }
        
        .timer {
            background: #fef3c7;
            color: #92400e;
            padding: 8px 16px;
            border-radius: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .progress-bar-container {
            margin-bottom: 25px;
        }
        
        .progress-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
            color: #6b7280;
        }
        
        .progress-bar {
            height: 10px;
            background: var(--border);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 5px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }
        
        @media (max-width: 768px) {
            .stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .stat-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid var(--border);
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 13px;
            color: #6b7280;
        }
        
        /* Score Card */
        .score-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(var(--success) 0% 0%, var(--border) 0% 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            position: relative;
        }
        
        .score-inner {
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        
        .score-main {
            font-size: 36px;
            color: var(--dark);
            line-height: 1;
        }
        
        .score-total {
            font-size: 18px;
            color: #6b7280;
        }
        
        .score-label {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        /* Controls */
        .controls {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-outline {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        
        /* Quiz Container */
        .quiz-container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 25px;
        }
        
        @media (max-width: 1000px) {
            .quiz-container {
                grid-template-columns: 1fr;
            }
        }
        
        /* Questions */
        .questions-section {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: var(--shadow);
        }
        
        .question-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border);
        }
        
        .question-counter {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
        }
        
        .question-card {
            margin-bottom: 30px;
            padding: 25px;
            border-radius: 12px;
            background: #f8fafc;
            border-left: 4px solid var(--primary);
        }
        
        .question-text {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 25px;
            color: var(--dark);
            line-height: 1.5;
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        
        .option {
            padding: 16px 20px;
            border-radius: 10px;
            border: 2px solid var(--border);
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .option:hover {
            border-color: var(--primary);
            background: #eff6ff;
        }
        
        .option.selected {
            border-color: var(--primary);
            background: #eff6ff;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .option.correct {
            border-color: var(--success);
            background: #d1fae5;
        }
        
        .option.incorrect {
            border-color: var(--danger);
            background: #fee2e2;
        }
        
        .option-label {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--dark);
            flex-shrink: 0;
        }
        
        .option.selected .option-label {
            background: var(--primary);
            color: white;
        }
        
        .option.correct .option-label {
            background: var(--success);
            color: white;
        }
        
        .option.incorrect .option-label {
            background: var(--danger);
            color: white;
        }
        
        .option-text {
            flex-grow: 1;
            font-size: 16px;
        }
        
        .option-icon {
            font-size: 18px;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .option.correct .option-icon,
        .option.incorrect .option-icon {
            opacity: 1;
        }
        
        /* Sidebar */
        .sidebar {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow);
            height: fit-content;
        }
        
        .sidebar-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .question-palette {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .palette-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid var(--border);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .palette-btn:hover {
            border-color: var(--primary);
        }
        
        .palette-btn.answered {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .palette-btn.current {
            border-color: var(--warning);
            background: #fef3c7;
            color: var(--dark);
        }
        
        .palette-btn.review {
            background: var(--warning);
            color: white;
            border-color: var(--warning);
        }
        
        .legend {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 25px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            flex-shrink: 0;
        }
        
        .legend-answered { background: var(--primary); }
        .legend-current { background: #fef3c7; border: 2px solid var(--warning); }
        .legend-review { background: var(--warning); }
        .legend-unanswered { background: var(--border); }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .modal.active {
            display: flex;
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            padding: 40px;
            transform: translateY(20px);
            transition: transform 0.3s;
        }
        
        .modal.active .modal-content {
            transform: translateY(0);
        }
        
        .modal-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .modal-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .modal-subtitle {
            color: #6b7280;
            font-size: 16px;
        }
        
        .result-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .result-stat {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        
        .result-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .result-label {
            font-size: 14px;
            color: #6b7280;
        }
        
        .performance {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .performance-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        .performance-message {
            color: #6b7280;
            font-size: 16px;
        }
        
        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            color: #6b7280;
            font-size: 14px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .controls {
                justify-content: center;
            }
            
            .question-nav {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .nav-buttons {
                width: 100%;
                justify-content: center;
            }
            
            .modal-actions {
                flex-direction: column;
            }
        }
        
        @media (max-width: 480px) {
            .stats {
                grid-template-columns: 1fr;
            }
            
            .question-palette {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .result-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="title-section">
                <h1><i class="fas fa-landmark"></i> HistoryMaster Pro</h1>
                <p class="subtitle">बंगाल पर अंग्रेज़ों का आधिपत्य - Advanced MCQ Test for UPSC, SSC, State PCS</p>
            </div>
            <div class="badges">
                <div class="badge"><i class="fas fa-clock"></i> Timed Test</div>
                <div class="badge"><i class="fas fa-chart-line"></i> Detailed Analytics</div>
                <div class="badge"><i class="fas fa-medal"></i> Competitive Level</div>
            </div>
        </header>
        
        <!-- Dashboard -->
        <div class="dashboard">
            <!-- Progress Card -->
            <div class="progress-card">
                <div class="progress-header">
                    <div class="progress-title">Test Progress</div>
                    <div class="timer" id="timer">
                        <i class="fas fa-clock"></i> <span id="time">30:00</span>
                    </div>
                </div>
                
                <div class="progress-bar-container">
                    <div class="progress-labels">
                        <span id="progressText">0/15 Questions</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
                
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value" id="answeredCount">0</div>
                        <div class="stat-label">Answered</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="correctCount">0</div>
                        <div class="stat-label">Correct</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="incorrectCount">0</div>
                        <div class="stat-label">Incorrect</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="remainingCount">15</div>
                        <div class="stat-label">Remaining</div>
                    </div>
                </div>
            </div>
            
            <!-- Score Card -->
            <div class="score-card">
                <div class="score-circle" id="scoreCircle">
                    <div class="score-inner">
                        <div class="score-main" id="currentScore">0</div>
                        <div class="score-total">/15</div>
                    </div>
                </div>
                <div class="score-label">Current Score</div>
                <div class="score-percent" id="scorePercent">0%</div>
            </div>
        </div>
        
        <!-- Controls -->
        <div class="controls">
            <button class="btn btn-primary" id="submitBtn" onclick="submitTest()">
                <i class="fas fa-paper-plane"></i> Submit Test
            </button>
            <button class="btn btn-success" id="checkBtn" onclick="checkAnswers()">
                <i class="fas fa-check-circle"></i> Check Answers
            </button>
            <button class="btn btn-warning" onclick="showSolutions()">
                <i class="fas fa-lightbulb"></i> Show Solutions
            </button>
            <button class="btn btn-outline" onclick="resetTest()">
                <i class="fas fa-redo"></i> Reset Test
            </button>
            <button class="btn btn-danger" onclick="exitTest()">
                <i class="fas fa-sign-out-alt"></i> Exit Test
            </button>
        </div>
        
        <!-- Quiz Container -->
        <div class="quiz-container">
            <!-- Questions Section -->
            <div class="questions-section">
                <div class="question-nav">
                    <div class="question-counter" id="questionCounter">Question 1 of 15</div>
                    <div class="nav-buttons">
                        <button class="btn btn-outline" onclick="prevQuestion()">
                            <i class="fas fa-arrow-left"></i> Previous
                        </button>
                        <button class="btn btn-outline" onclick="nextQuestion()">
                            Next <i class="fas fa-arrow-right"></i>
                        </button>
                        <button class="btn btn-warning" onclick="markForReview()">
                            <i class="fas fa-flag"></i> Review
                        </button>
                    </div>
                </div>
                
                <div id="questionsContainer">
                    <!-- Questions will be dynamically inserted here -->
                </div>
            </div>
            
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-title">
                    <i class="fas fa-th"></i> Question Palette
                </div>
                
                <div class="question-palette" id="questionPalette">
                    <!-- Palette buttons will be dynamically inserted here -->
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color legend-answered"></div>
                        <span>Answered</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-current"></div>
                        <span>Current</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-review"></div>
                        <span>Marked for Review</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-unanswered"></div>
                        <span>Not Answered</span>
                    </div>
                </div>
                
                <div class="sidebar-title">
                    <i class="fas fa-chart-bar"></i> Test Summary
                </div>
                
                <div class="stats" style="grid-template-columns: repeat(2, 1fr); margin-top: 15px;">
                    <div class="stat-card">
                        <div class="stat-value" id="sidebarAnswered">0</div>
                        <div class="stat-label">Answered</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="sidebarCorrect">0</div>
                        <div class="stat-label">Correct</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="sidebarIncorrect">0</div>
                        <div class="stat-label">Incorrect</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="sidebarReview">0</div>
                        <div class="stat-label">For Review</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p>© 2024 HistoryMaster Pro | Designed for Competitive Exam Preparation | बंगाल पर अंग्रेज़ों का आधिपत्य</p>
            <p style="margin-top: 5px;"><i class="fas fa-laptop"></i> Fully Responsive | <i class="fas fa-mobile-alt"></i> Mobile Friendly | <i class="fas fa-print"></i> Printable</p>
        </div>
    </div>
    
    <!-- Result Modal -->
    <div class="modal" id="resultModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-trophy"></i> Test Completed!</div>
                <div class="modal-subtitle">Comprehensive Analysis of Your Performance</div>
            </div>
            
            <div class="result-stats">
                <div class="result-stat">
                    <div class="result-value" id="finalScore">0</div>
                    <div class="result-label">Total Score</div>
                </div>
                <div class="result-stat">
                    <div class="result-value" id="finalPercent">0%</div>
                    <div class="result-label">Accuracy</div>
                </div>
                <div class="result-stat">
                    <div class="result-value" id="timeTaken">00:00</div>
                    <div class="result-label">Time Taken</div>
                </div>
                <div class="result-stat">
                    <div class="result-value" id="rank">--</div>
                    <div class="result-label">Estimated Rank</div>
                </div>
            </div>
            
            <div class="performance">
                <div class="performance-title" id="performanceTitle">Let's Get Started!</div>
                <div class="performance-message" id="performanceMessage">Complete the test to see your detailed performance analysis</div>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-primary" onclick="reviewTest()">
                    <i class="fas fa-search"></i> Review Answers
                </button>
                <button class="btn btn-success" onclick="showAllSolutions()">
                    <i class="fas fa-lightbulb"></i> View Solutions
                </button>
                <button class="btn btn-outline" onclick="closeModal()">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
    </div>
    
    <!-- Solutions Modal -->
    <div class="modal" id="solutionsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-lightbulb"></i> Detailed Solutions</div>
                <div class="modal-subtitle">Learn from explanations and historical context</div>
            </div>
            
            <div id="solutionsContent" style="max-height: 400px; overflow-y: auto; margin-bottom: 30px;">
                <!-- Solutions will be inserted here -->
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-outline" onclick="closeSolutions()">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
    </div>

    <script>
        // Questions Data
        const questions = [
            {
                id: 1,
                question: "मुर्शिद कुली ख़ाँ किस काल में बंगाल का नवाब था?",
                options: [
                    {id: 'A', text: "1700–1710"},
                    {id: 'B', text: "1713–1727"},
                    {id: 'C', text: "1727–1739"},
                    {id: 'D', text: "1739–1740"}
                ],
                correct: 'B',
                explanation: "मुर्शिद कुली ख़ाँ 1717 से 1727 ई. तक बंगाल का नवाब रहा। उसने मुगल सम्राट फर्रूखसियर से स्वतंत्र शासक की मान्यता प्राप्त की और बंगाल में स्वायत्त शासन की स्थापना की।"
            },
            {
                id: 2,
                question: "मुर्शिद कुली ख़ाँ ने राजधानी ढाका से बदलकर कहाँ की?",
                options: [
                    {id: 'A', text: "पटना"},
                    {id: 'B', text: "मुंगेर"},
                    {id: 'C', text: "मुर्शिदाबाद"},
                    {id: 'D', text: "कलकत्ता"}
                ],
                correct: 'C',
                explanation: "मुर्शिद कुली ख़ाँ ने 1704 ई. में राजधानी ढाका से मुखसूसाबाद स्थानांतरित की, जिसका नाम बदलकर बाद में मुर्शिदाबाद रखा गया। यह गंगा नदी के किनारे स्थित था।"
            },
            {
                id: 3,
                question: "मुर्शिद कुली ख़ाँ ने कौन-सी राजस्व व्यवस्था शुरू की?",
                options: [
                    {id: 'A', text: "स्थायी बंदोबस्त"},
                    {id: 'B', text: "रैयतवाड़ी"},
                    {id: 'C', text: "इजारेदारी प्रथा"},
                    {id: 'D', text: "महालवाड़ी"}
                ],
                correct: 'C',
                explanation: "मुर्शिद कुली ख़ाँ ने इजारेदारी प्रथा शुरू की, जिसमें राजस्व वसूली का ठेका इजारेदारों को दिया जाता था। यह व्यवस्था बाद में ब्रिटिश काल में भी जारी रही।"
            },
            {
                id: 4,
                question: "मुर्शिद कुली ख़ाँ के बाद बंगाल का नवाब कौन बना?",
                options: [
                    {id: 'A', text: "सरफराज़ ख़ाँ"},
                    {id: 'B', text: "शुजाउद्दीन"},
                    {id: 'C', text: "अलीवर्दी ख़ाँ"},
                    {id: 'D', text: "सिराजुद्दौला"}
                ],
                correct: 'B',
                explanation: "मुर्शिद कुली ख़ाँ के बाद उसका दामाद शुजाउद्दीन मुहम्मद ख़ाँ 1727 से 1739 ई. तक बंगाल का नवाब बना। उसने शासन व्यवस्था को मजबूत किया और व्यापार को प्रोत्साहित किया।"
            },
            {
                id: 5,
                question: "अलीवर्दी ख़ाँ का शासनकाल क्या था?",
                options: [
                    {id: 'A', text: "1727–1739"},
                    {id: 'B', text: "1739–1740"},
                    {id: 'C', text: "1740–1756"},
                    {id: 'D', text: "1756–1757"}
                ],
                correct: 'C',
                explanation: "अलीवर्दी ख़ाँ 1740 से 1756 ई. तक बंगाल का नवाब रहा। उसने मराठा आक्रमणों का सफलतापूर्वक सामना किया और बंगाल को 'भारत का स्वर्ण' कहा जाने लगा।"
            },
            {
                id: 6,
                question: "अलीवर्दी ख़ाँ के समय बंगाल को क्या कहा जाने लगा?",
                options: [
                    {id: 'A', text: "भारत का हृदय"},
                    {id: 'B', text: "भारत का स्वर्ग"},
                    {id: 'C', text: "भारत का स्वर्ण"},
                    {id: 'D', text: "भारत का द्वार"}
                ],
                correct: 'C',
                explanation: "अलीवर्दी ख़ाँ के कुशल शासन में बंगाल की आर्थिक समृद्धि चरम पर थी, जिसके कारण इसे 'भारत का स्वर्ण' (Paradise of India) कहा जाने लगा।"
            },
            {
                id: 7,
                question: "1756 ई. में बंगाल का नवाब कौन बना?",
                options: [
                    {id: 'A', text: "अलीवर्दी ख़ाँ"},
                    {id: 'B', text: "मीर जाफ़र"},
                    {id: 'C', text: "सिराजुद्दौला"},
                    {id: 'D', text: "मीर कासिम"}
                ],
                correct: 'C',
                explanation: "अलीवर्दी ख़ाँ की मृत्यु के बाद उसका पोता सिराजुद्दौला 1756 ई. में बंगाल का नवाब बना। उसकी उम्र मात्र 23 वर्ष थी जब वह सत्ता में आया।"
            },
            {
                id: 8,
                question: "'ब्लैक होल त्रासदी' किस वर्ष हुई?",
                options: [
                    {id: 'A', text: "1754"},
                    {id: 'B', text: "1755"},
                    {id: 'C', text: "1756"},
                    {id: 'D', text: "1757"}
                ],
                correct: 'C',
                explanation: "ब्लैक होल त्रासदी 20 जून 1756 को हुई, जब सिराजुद्दौला ने कलकत्ता पर कब्जा किया और 146 ब्रिटिश कैदियों को एक छोटे कमरे में बंद कर दिया, जिसमें अधिकांश की मृत्यु हो गई।"
            },
            {
                id: 9,
                question: "ब्लैक होल त्रासदी किस स्थान से संबंधित है?",
                options: [
                    {id: 'A', text: "मुर्शिदाबाद"},
                    {id: 'B', text: "प्लासी"},
                    {id: 'C', text: "कलकत्ता"},
                    {id: 'D', text: "पटना"}
                ],
                correct: 'C',
                explanation: "यह घटना कलकत्ता (अब कोलकाता) के फोर्ट विलियम में घटी। इस स्थान पर आज भी एक स्मारक बना हुआ है जो इस घटना की याद दिलाता है।"
            },
            {
                id: 10,
                question: "प्लासी का युद्ध कब हुआ?",
                options: [
                    {id: 'A', text: "1756"},
                    {id: 'B', text: "23 जून 1757"},
                    {id: 'C', text: "1760"},
                    {id: 'D', text: "1764"}
                ],
                correct: 'B',
                explanation: "प्लासी का युद्ध 23 जून 1757 को हुआ। यह युद्ध नदिया जिले में भागीरथी नदी के किनारे प्लासी नामक स्थान पर लड़ा गया।"
            },
            {
                id: 11,
                question: "प्लासी के युद्ध में अंग्रेज़ों की ओर से सेनापति कौन था?",
                options: [
                    {id: 'A', text: "वॉरेन हेस्टिंग्स"},
                    {id: 'B', text: "रॉबर्ट क्लाइव"},
                    {id: 'C', text: "डलहौज़ी"},
                    {id: 'D', text: "कर्नवालिस"}
                ],
                correct: 'B',
                explanation: "रॉबर्ट क्लाइव ने केवल 3,000 सैनिकों के साथ सिराजुद्दौला की 50,000 सैनिकों वाली सेना को हराया। इस जीत ने भारत में ब्रिटिश साम्राज्य की नींव रखी।"
            },
            {
                id: 12,
                question: "प्लासी के युद्ध में सिराजुद्दौला की ओर से विश्वासघात किसने किया?",
                options: [
                    {id: 'A', text: "मीर कासिम"},
                    {id: 'B', text: "मीर जाफ़र"},
                    {id: 'C', text: "शुजाउद्दीन"},
                    {id: 'D', text: "अलीवर्दी ख़ाँ"}
                ],
                correct: 'B',
                explanation: "मीर जाफ़र, जो सिराजुद्दौला का सेनापति था, ने रॉबर्ट क्लाइव से गुप्त समझौता कर लिया था। युद्ध के दौरान उसने अपने सैनिकों को युद्ध न करने का आदेश दिया।"
            },
            {
                id: 13,
                question: "प्लासी के युद्ध के बाद बंगाल का नवाब किसे बनाया गया?",
                options: [
                    {id: 'A', text: "सिराजुद्दौला"},
                    {id: 'B', text: "मीर कासिम"},
                    {id: 'C', text: "मीर जाफ़र"},
                    {id: 'D', text: "शुजाउद्दौला"}
                ],
                correct: 'C',
                explanation: "प्लासी की जीत के बाद अंग्रेजों ने मीर जाफ़र को बंगाल का नवाब बनाया। बदले में मीर जाफ़र ने अंग्रेजों को भारी मात्रा में धन और व्यापारिक सुविधाएं दीं।"
            },
            {
                id: 14,
                question: "मीर जाफ़र को हटाकर बंगाल का नवाब किसे बनाया गया?",
                options: [
                    {id: 'A', text: "सिराजुद्दौला"},
                    {id: 'B', text: "मीर कासिम"},
                    {id: 'C', text: "शुजाउद्दौला"},
                    {id: 'D', text: "मुबारक-उद्दौला"}
                ],
                correct: 'B',
                explanation: "मीर जाफ़र की अक्षमता से असंतुष्ट होकर अंग्रेजों ने 1760 में उसे हटाकर उसके दामाद मीर कासिम को बंगाल का नवाब बनाया।"
            },
            {
                id: 15,
                question: "बक्सर का युद्ध कब हुआ?",
                options: [
                    {id: 'A', text: "1757"},
                    {id: 'B', text: "1760"},
                    {id: 'C', text: "1764"},
                    {id: 'D', text: "1770"}
                ],
                correct: 'C',
                explanation: "बक्सर का युद्ध 22 अक्टूबर 1764 को हुआ। इस युद्ध में अंग्रेजों ने मीर कासिम, शुजाउद्दौला (अवध का नवाब) और शाह आलम द्वितीय (मुगल सम्राट) की संयुक्त सेना को हराया।"
            }
        ];

        // Quiz State
        let currentQuestion = 1;
        let userAnswers = {};
        let reviewQuestions = new Set();
        let score = 0;
        let timer = 30 * 60; // 30 minutes in seconds
        let timerInterval;
        let testSubmitted = false;
        let startTime;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderQuestions();
            renderQuestionPalette();
            updateStats();
            startTimer();
            startTime = Date.now();
        });

        // Render Questions
        function renderQuestions() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';
            
            questions.forEach((q, index) => {
                const questionHTML = `
                    <div class="question-card" id="question-${q.id}" style="${q.id !== currentQuestion ? 'display: none;' : ''}">
                        <div class="question-text">${q.id}. ${q.question}</div>
                        <div class="options-grid">
                            ${q.options.map(opt => {
                                const isSelected = userAnswers[q.id] === opt.id;
                                const isCorrect = testSubmitted && opt.id === q.correct;
                                const isIncorrect = testSubmitted && isSelected && opt.id !== q.correct;
                                
                                let optionClass = 'option';
                                if (isSelected) optionClass += ' selected';
                                if (isCorrect) optionClass += ' correct';
                                if (isIncorrect) optionClass += ' incorrect';
                                
                                return `
                                    <div class="${optionClass}" onclick="selectAnswer(${q.id}, '${opt.id}')">
                                        <div class="option-label">${opt.id}</div>
                                        <div class="option-text">${opt.text}</div>
                                        ${isCorrect ? '<div class="option-icon"><i class="fas fa-check"></i></div>' : ''}
                                        ${isIncorrect ? '<div class="option-icon"><i class="fas fa-times"></i></div>' : ''}
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
                container.innerHTML += questionHTML;
            });
            
            updateQuestionCounter();
        }

        // Render Question Palette
        function renderQuestionPalette() {
            const palette = document.getElementById('questionPalette');
            palette.innerHTML = '';
            
            questions.forEach(q => {
                let btnClass = 'palette-btn';
                if (userAnswers[q.id]) btnClass += ' answered';
                if (q.id === currentQuestion) btnClass += ' current';
                if (reviewQuestions.has(q.id)) btnClass += ' review';
                
                palette.innerHTML += `
                    <button class="${btnClass}" onclick="goToQuestion(${q.id})">
                        ${q.id}
                    </button>
                `;
            });
        }

        // Select Answer
        function selectAnswer(questionId, optionId) {
            if (testSubmitted) return;
            
            userAnswers[questionId] = optionId;
            
            // Update current question display
            const questionElement = document.getElementById(`question-${questionId}`);
            const options = questionElement.querySelectorAll('.option');
            
            options.forEach(opt => {
                opt.classList.remove('selected');
                const optId = opt.querySelector('.option-label').textContent;
                if (optId === optionId) {
                    opt.classList.add('selected');
                }
            });
            
            updateStats();
            renderQuestionPalette();
        }

        // Go to Question
        function goToQuestion(questionId) {
            // Hide current question
            document.getElementById(`question-${currentQuestion}`).style.display = 'none';
            
            // Show selected question
            currentQuestion = questionId;
            document.getElementById(`question-${currentQuestion}`).style.display = 'block';
            
            updateQuestionCounter();
            renderQuestionPalette();
        }

        // Next Question
        function nextQuestion() {
            if (currentQuestion < questions.length) {
                goToQuestion(currentQuestion + 1);
            }
        }

        // Previous Question
        function prevQuestion() {
            if (currentQuestion > 1) {
                goToQuestion(currentQuestion - 1);
            }
        }

        // Mark for Review
        function markForReview() {
            if (reviewQuestions.has(currentQuestion)) {
                reviewQuestions.delete(currentQuestion);
            } else {
                reviewQuestions.add(currentQuestion);
            }
            renderQuestionPalette();
            updateStats();
        }

        // Update Stats
        function updateStats() {
            const answered = Object.keys(userAnswers).length;
            const correct = calculateCorrectAnswers();
            const incorrect = answered - correct;
            const remaining = questions.length - answered;
            const progressPercent = Math.round((answered / questions.length) * 100);
            
            // Update progress bar
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
            document.getElementById('progressText').textContent = `${answered}/${questions.length} Questions`;
            document.getElementById('progressPercent').textContent = `${progressPercent}%`;
            
            // Update stats
            document.getElementById('answeredCount').textContent = answered;
            document.getElementById('correctCount').textContent = correct;
            document.getElementById('incorrectCount').textContent = incorrect;
            document.getElementById('remainingCount').textContent = remaining;
            
            // Update score
            document.getElementById('currentScore').textContent = correct;
            const scorePercent = answered > 0 ? Math.round((correct / answered) * 100) : 0;
            document.getElementById('scorePercent').textContent = `${scorePercent}%`;
            
            // Update score circle
            const scoreCircle = document.getElementById('scoreCircle');
            const totalPercent = Math.round((correct / questions.length) * 100);
            scoreCircle.style.background = `conic-gradient(var(--success) 0% ${totalPercent}%, var(--border) ${totalPercent}% 100%)`;
            
            // Update sidebar
            document.getElementById('sidebarAnswered').textContent = answered;
            document.getElementById('sidebarCorrect').textContent = correct;
            document.getElementById('sidebarIncorrect').textContent = incorrect;
            document.getElementById('sidebarReview').textContent = reviewQuestions.size;
        }

        // Calculate Correct Answers
        function calculateCorrectAnswers() {
            let correct = 0;
            Object.keys(userAnswers).forEach(qId => {
                const question = questions.find(q => q.id == qId);
                if (question && userAnswers[qId] === question.correct) {
                    correct++;
                }
            });
            score = correct;
            return correct;
        }

        // Update Question Counter
        function updateQuestionCounter() {
            document.getElementById('questionCounter').textContent = 
                `Question ${currentQuestion} of ${questions.length}`;
        }

        // Timer
        function startTimer() {
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                if (timer > 0) {
                    timer--;
                    updateTimerDisplay();
                } else {
                    clearInterval(timerInterval);
                    submitTest();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timer / 60);
            const seconds = timer % 60;
            document.getElementById('time').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Check Answers
        function checkAnswers() {
            testSubmitted = true;
            calculateCorrectAnswers();
            renderQuestions();
            updateStats();
            
            // Show modal with results
            showResultModal();
        }

        // Submit Test
        function submitTest() {
            clearInterval(timerInterval);
            testSubmitted = true;
            calculateCorrectAnswers();
            renderQuestions();
            updateStats();
            showResultModal();
        }

        // Show Result Modal
        function showResultModal() {
            const totalCorrect = calculateCorrectAnswers();
            const finalPercent = Math.round((totalCorrect / questions.length) * 100);
            
            // Calculate time taken
            const timeTaken = 30 * 60 - timer;
            const minutesTaken = Math.floor(timeTaken / 60);
            const secondsTaken = timeTaken % 60;
            const timeTakenStr = `${minutesTaken.toString().padStart(2, '0')}:${secondsTaken.toString().padStart(2, '0')}`;
            
            document.getElementById('finalScore').textContent = `${totalCorrect}/${questions.length}`;
            document.getElementById('finalPercent').textContent = `${finalPercent}%`;
            document.getElementById('timeTaken').textContent = timeTakenStr;
            
            // Calculate estimated rank
            let rank = '--';
            if (finalPercent >= 90) rank = 'Top 5%';
            else if (finalPercent >= 80) rank = 'Top 15%';
            else if (finalPercent >= 70) rank = 'Top 30%';
            else if (finalPercent >= 60) rank = 'Top 50%';
            else rank = 'Needs Improvement';
            document.getElementById('rank').textContent = rank;
            
            // Set performance message
            const performanceTitle = document.getElementById('performanceTitle');
            const performanceMessage = document.getElementById('performanceMessage');
            
            if (finalPercent >= 90) {
                performanceTitle.innerHTML = '<i class="fas fa-trophy"></i> Outstanding!';
                performanceMessage.textContent = 'Excellent performance! You have mastered this topic completely.';
            } else if (finalPercent >= 75) {
                performanceTitle.innerHTML = '<i class="fas fa-medal"></i> Very Good!';
                performanceMessage.textContent = 'Strong understanding of the topic. Keep practicing to achieve perfection.';
            } else if (finalPercent >= 60) {
                performanceTitle.innerHTML = '<i class="fas fa-star"></i> Good Effort';
                performanceMessage.textContent = 'You have a good grasp but need to focus on some areas.';
            } else if (finalPercent >= 40) {
                performanceTitle.innerHTML = '<i class="fas fa-book"></i> Needs Practice';
                performanceMessage.textContent = 'Review the concepts thoroughly and try again.';
            } else {
                performanceTitle.innerHTML = '<i class="fas fa-graduation-cap"></i> Requires Study';
                performanceMessage.textContent = 'Please study the topic carefully before attempting again.';
            }
            
            document.getElementById('resultModal').classList.add('active');
        }

        // Show Solutions
        function showSolutions() {
            const solutionsContent = document.getElementById('solutionsContent');
            solutionsContent.innerHTML = '';
            
            questions.forEach(q => {
                const userAnswer = userAnswers[q.id];
                const isCorrect = userAnswer === q.correct;
                const userAnswerText = userAnswer ? 
                    `${userAnswer}. ${q.options.find(o => o.id === userAnswer)?.text || 'Not found'}` : 
                    'Not Attempted';
                
                solutionsContent.innerHTML += `
                    <div style="margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid var(--border);">
                        <div style="font-weight: 600; margin-bottom: 10px; color: var(--dark);">
                            ${q.id}. ${q.question}
                        </div>
                        <div style="margin-bottom: 8px;">
                            <strong>Your Answer:</strong> 
                            ${userAnswerText}
                            ${userAnswer ? (isCorrect ? ' ✅' : ' ❌') : ''}
                        </div>
                        <div style="margin-bottom: 8px; color: var(--success);">
                            <strong>Correct Answer:</strong> ${q.correct}. ${q.options.find(o => o.id === q.correct).text}
                        </div>
                        <div style="background: #f8fafc; padding: 12px; border-radius: 8px; font-size: 14px;">
                            <strong>Explanation:</strong> ${q.explanation}
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('solutionsModal').classList.add('active');
        }

        // Show All Solutions
        function showAllSolutions() {
            closeModal();
            setTimeout(() => showSolutions(), 300);
        }

        // Review Test
        function reviewTest() {
            closeModal();
            testSubmitted = true;
            renderQuestions();
        }

        // Reset Test
        function resetTest() {
            if (confirm("Are you sure you want to reset the test? All progress will be lost.")) {
                currentQuestion = 1;
                userAnswers = {};
                reviewQuestions = new Set();
                score = 0;
                timer = 30 * 60;
                testSubmitted = false;
                
                clearInterval(timerInterval);
                startTimer();
                renderQuestions();
                renderQuestionPalette();
                updateStats();
                closeModal();
                document.getElementById('solutionsModal').classList.remove('active');
            }
        }

        // Exit Test
        function exitTest() {
            if (confirm("Are you sure you want to exit the test?")) {
                // In a real application, this would redirect to another page
                alert("Test exited. In a real application, this would redirect to the dashboard.");
            }
        }

        // Close Modal
        function closeModal() {
            document.getElementById('resultModal').classList.remove('active');
        }

        // Close Solutions
        function closeSolutions() {
            document.getElementById('solutionsModal').classList.remove('active');
        }
    </script>
</body>
</html>
